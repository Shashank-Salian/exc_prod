import{h as g,o as t,E as T,I as b,a as $,b as w,i as N,c as S,r as I,B as x}from"./utils-609fe6b6.js";const D="_container_g6mgu_1",k="_heading_g6mgu_21",R="_loginText_g6mgu_29",q="_msgField_g6mgu_37",O="_submitBtn_g6mgu_65",j="_switchContainer_g6mgu_73",z="_switchBtn_g6mgu_81",d={container:D,heading:k,loginText:R,msgField:q,submitBtn:O,switchContainer:j,switchBtn:z},A=H=>{const o=[{id:"signupName",type:"text",isValid:()=>o[0].value.length>=2,value:"",placeholder:"Name"},{id:"signupEmail",type:"email",isValid:()=>N(o[1].value),value:"",placeholder:"Email"},{id:"signupUsername",type:"text",isValid:()=>S(o[2].value),value:"",placeholder:"Username"},{id:"signupPassword",type:"password",isValid:()=>o[3].value.length>=8,value:"",placeholder:"Password"},{id:"signupConfirmPassword",type:"password",isValid:()=>o[4].value===o[3].value,value:"",placeholder:"Confirm password"}],u=[{id:"loginUsername",type:"text",isValid:()=>N(u[0].value)||S(u[0].value),value:"",placeholder:"Username"},{id:"loginPassword",type:"password",isValid:()=>u[1].value.length>=8,value:"",placeholder:"Password"}],[c,v]=g(!1),[P,p]=g(!1),[i,y]=g(o),[m,f]=g(u),[_,n]=g({message:"",type:"normal"}),B=(e,a)=>{y(r=>{const l=[...r];let s=e.currentTarget.value;return(a===1||a===2)&&(s=s.toLowerCase()),l[a].value=s,l})},F=(e,a)=>{f(r=>{const l=[...r];let s=e.currentTarget.value;return a===0&&(s=s.toLowerCase()),l[a].value=s,l})},L=async(e,a,r,l)=>{const s=new FormData;s.append("fullName",e),s.append("email",a),s.append("userName",r),s.append("password",l);try{const h=await(await I("/api/users/signup/",s,"POST")).json();if(console.log(h),h.ok){n({message:h.message,type:"success"}),v(!1),y(o),f(u);return}n({message:h.message,type:"error"})}catch(V){n({message:"Something went wrong",type:"error"}),console.log(V)}},C=async(e,a)=>{try{const r=new FormData;r.append("userName",e),r.append("password",a);const s=await(await I("/api/users/login/",r,"POST")).json();if(console.log(s),s.ok){n({message:s.message,type:"success"}),location.pathname="/";return}n({message:s.message,type:"error"})}catch(r){n({message:"Something went wrong",type:"error"}),console.log(r)}},U=async e=>{if(e.preventDefault(),e.stopImmediatePropagation(),c){if(i.every(a=>a.isValid())){p(!0),await L(i[0].value,i[1].value,i[2].value,i[3].value).catch(()=>{}),p(!1);return}if(!i[0].isValid()){n({message:"Name must be at least 2 characters long",type:"error"});return}if(!i[1].isValid()){n({message:"Enter valid email",type:"error"});return}if(!i[2].isValid()){n({message:"Username must be all lower case letters and only numbers and '_' allowed",type:"error"});return}if(!i[3].isValid()){n({message:"Password must be at least 8 characters long",type:"error"});return}i[4].isValid()||n({message:"Password doesn't match",type:"error"});return}if(m.every(a=>a.isValid())){p(!0),await C(m[0].value,m[1].value).catch(()=>{}),p(!1);return}if(!m[0].isValid()){n({message:"Username must be all lower case letters and only numbers and '_' allowed",type:"error"});return}if(!m[1].isValid()){n({message:"Enter valid password",type:"error"});return}n({message:"Entered data is not valid",type:"error"})},E=()=>{n({message:"",type:"normal"}),v(e=>!e)};return t("div",{className:`drop-shadow ${d.container}`,children:[t("div",{className:d.heading,children:[t("p",{className:d.loginText,children:c?"Sign up to":"Log in to"}),t(T,{width:"120",color:"var(--white)"})]}),t("form",{action:`/api/users/${c?"signup":"login"}`,method:"POST",onSubmit:U,children:[t("div",{className:"mt-40",children:c?i.map((e,a)=>t(b,{id:e.id,type:e.type,placeholder:e.placeholder,name:`form-${e.id}`,required:!0,value:e.value,onInput:r=>B(r,a),isValid:e.isValid(),className:"mt-30 fw",whiteLbl:!0},a)):t($,{children:[m.map((e,a)=>t(b,{id:e.id,name:`form-${e.id}`,type:e.type,placeholder:e.placeholder,value:e.value,required:!0,onInput:r=>F(r,a),isValid:e.isValid(),className:"mt-30 fw",whiteLbl:!0},a)),t(w,{className:"mt-10",color:"transp",type:"button",children:"Forgot password ?"})]})}),t("p",{className:`mt-20 mb-20 ${d.msgField}`,"data-type":_.type,children:_.message}),t(w,{className:`mb-30 ${d.submitBtn}`,size:"large",color:"orange",type:"submit",loading:P,children:c?"Sign up":"Log in"}),t("div",{className:d.switchContainer,children:[c?"Already have an account ?":"New here ?",t(w,{className:`${d.switchBtn}`,color:"transp",type:"button",onClick:E,children:c?"Log In":"Sign Up"})]})]})]})},M="_container_2nmez_1",W={container:M},G=()=>t("div",{className:W.container,children:t(A,{})});x(t(G,{}),document.getElementById("root"));
