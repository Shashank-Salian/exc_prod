import{p as V,B as M,o as n,a as b,h as u,I as k,b as L,f as x,r as z,_ as B,E as D,d as j}from"./utils-f1dc011d.js";const q="_container_1ggvq_1",P="_wrapper_1ggvq_19",S="_searchContainer_1ggvq_33",O="_buttons_1ggvq_41",Z="_iconContainer_1ggvq_51",R="_iconOptions_1ggvq_71",v={container:q,wrapper:P,searchContainer:S,buttons:O,iconContainer:Z,iconOptions:R},T=(e,a)=>{V(()=>{if(!a.show)return;const c=document.getElementById("portal");c&&document.body.removeChild(c);const t=document.createElement("div");return t.id="portal",document.body.appendChild(t),M(n(b,{children:n("div",{className:"portal-container",children:[e,n("div",{onClick:_=>{a.onBackdropClick&&a.onBackdropClick(_)},className:a.showBackdrop===void 0||a.showBackdrop?"backdrop":void 0})]})}),t),()=>{document.body.removeChild(t)}},[a])},E="_container_uzkv2_1",F="_fw_uzkv2_19",U="_pad_uzkv2_27",A="_heading_uzkv2_35",W="_icon_uzkv2_69",G="_body_uzkv2_81",J="_yellow_uzkv2_113",K="_orange_uzkv2_121",Q="_blue_uzkv2_129",X="_red_uzkv2_137",Y="_transp_uzkv2_145",w={container:E,fw:F,pad:U,heading:A,icon:W,body:G,yellow:J,orange:K,blue:Q,red:X,transp:Y},ee=e=>n("svg",{height:e.width||"32",width:e.width||"32",fill:"none",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",className:e.className,children:[n("path",{d:"M26.7543 1.84812L1.93588 26.739C0.996174 27.6814 1.02471 29.2381 1.99959 30.2158C2.97447 31.1935 4.52655 31.2221 5.46626 30.2797L30.2847 5.3888C31.2244 4.44635 31.1959 2.88974 30.221 1.912C29.2461 0.934275 27.694 0.905672 26.7543 1.84812Z",fill:e.color||"black"}),n("path",{d:"M30.0642 26.739L5.24573 1.8481C4.30602 0.90565 2.75393 0.934265 1.77904 1.91199C0.80416 2.88972 0.775643 4.44633 1.71535 5.38878L26.5338 30.2796C27.4735 31.2221 29.0256 31.1935 30.0005 30.2158C30.9754 29.238 31.0039 27.6814 30.0642 26.739Z",fill:e.color||"black"})]}),ne=e=>n("div",{className:`${e.noShadow?"":"drop-shadow"} ${e.noMargin?"":"mt-20 mr-40 mb-20 ml-20"} ${w.container} ${e.className||""} ${e.color?w[e.color]:""} ${e.fw?w.fw:""}`,children:[e.heading?n("div",{className:`${w.heading}`,children:[e.boldHead?n("h2",{children:e.heading}):e.heading,e.icon?n("div",{className:w.icon,onClick:e.onIconClick,children:e.icon==="close"?n(ee,{width:"24"}):null}):null]}):null,n("div",{className:w.body,children:e.children})]}),ae=e=>n("svg",{height:e.width||"32",width:e.width||"32",fill:"none",viewBox:"0 0 32 32",className:e.className,xmlns:"http://www.w3.org/2000/svg",children:n("path",{d:"M10.6667 14.6666H2.66667V28H29.3333V14.6666H21.3333V12H32V30.6666H0V12H10.6667V14.6666ZM9.33333 9.33331L16 1.33331L22.6667 9.33331H17.3333V24H14.6667V9.33331H9.33333Z",fill:e.color||"black",fillRule:"evenodd"})}),te="_container_c6z1e_1",ce="_fileInpContainer_c6z1e_11",ie="_imgInp_c6z1e_27",oe="_imgInpContainer_c6z1e_49",se="_inpContainer_c6z1e_65",le="_inp_c6z1e_65",h={container:te,fileInpContainer:ce,imgInp:ie,imgInpContainer:oe,inpContainer:se,inp:le},re=e=>n("svg",{height:e.width||"32",width:e.width||"32",fill:"none",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:n("path",{d:"M26 16C22.6893 16 20 18.6867 20 22C20 25.3133 22.6893 28 26 28C29.3107 28 32 25.3133 32 22C32 18.6867 29.3107 16 26 16ZM29.3333 22.6667H26.6667V25.3333H25.3333V22.6667H22.6667V21.3333H25.3333V18.6667H26.6667V21.3333H29.3333V22.6667ZM5.33333 22.6667L10.6667 14.72L13.9733 17.3333L17.3333 12L19.804 15.952C18.1093 17.6893 17.168 20.0707 17.368 22.6667H5.33333ZM19.76 28H0V4H29.3333V14.0013C28.5027 13.6533 27.604 13.4387 26.6667 13.3667V6.66667H2.66667V25.3333H18.0027C18.4187 26.332 19.0227 27.232 19.76 28ZM7.33333 13.3333C6.22933 13.3333 5.33333 12.4387 5.33333 11.3333C5.33333 10.2293 6.22933 9.33333 7.33333 9.33333C8.43733 9.33333 9.33333 10.2293 9.33333 11.3333C9.33333 12.4387 8.43733 13.3333 7.33333 13.3333Z",fill:e.color||"black"})}),me=e=>n("div",{className:`${h.container} ${e.className||""}`,children:[e.image?n(b,{children:[n("div",{className:`${h.inpContainer} ${h.imgInpContainer} lite-shadow`,children:n(re,{width:"58",color:"var(--black)"})}),e.preview?n("img",{src:e.preview,className:`${h.inpContainer} ${h.imgInpContainer}`}):null]}):n("div",{className:`${h.inpContainer} ${h.fileInpContainer} lite-shadow`,children:[e.text,n(ae,{color:"#fff",className:"ml-10",width:"22"})]}),n("input",{type:"file",id:e.id,name:e.name,required:e.required,multiple:e.multiple,accept:e.accept,onInput:e.onInput,style:e.width?{width:e.width}:void 0,className:`${e.image?`mb-10 ${h.imgInp}`:h.inp}`}),n("br",{}),n("label",{htmlFor:e.id,children:e.placeholder})]}),de="_container_92dj4_1",he="_wrapper_92dj4_13",ue="_label_92dj4_29",_e="_inp_92dj4_37",ge="_errorMsg_92dj4_45",l={container:de,wrapper:he,label:ue,inp:_e,errorMsg:ge},Ce=e=>{const[a,c]=u(),[t,N]=u({commName:{name:"community-name",value:""},topic:{name:"community-topic",value:""},description:{name:"community-description",value:""}}),[_,m]=u({message:"",mode:"warn"}),[$,p]=u(!1),f=d=>{const{files:o}=d.currentTarget;if(o&&o.length!==0){const[i]=o;if(i.size>1024*1024){m({message:"Image size should be less than 1MB",mode:"error"});return}m({message:"",mode:"warn"}),c({file:i,url:URL.createObjectURL(i)})}},g=d=>{const o=d.currentTarget.value;N(i=>{const s={...i};switch(d.currentTarget.name){case s.commName.name:const C=o.toLowerCase();if(C===""||x(C,1)){m({message:"",mode:"warn"}),s.commName.value=C;break}m({message:"Invalid community name",mode:"error"});break;case s.topic.name:s.topic.value=o;break;case s.description.name:s.description.value=o;break}return s})},I=async d=>{if(d.preventDefault(),d.stopImmediatePropagation(),x(t.commName.value)&&t.topic.value.length>2&&t.topic.value.length<=25&&t.description.value.length<=500){const o=new FormData;o.append("communityName",t.commName.value),o.append("topic",t.topic.value),o.append("description",t.description.value),a&&o.append("communityIcon",a.file);try{p(!0);const s=await(await z("/api/community/create/",o,"POST")).json();console.log(s),p(!1),s.error?m({message:s.message,mode:"error"}):m({message:s.message,mode:"success"})}catch(i){p(!1),console.error(i)}}else m({message:"Invalid input",mode:"error"})};return n(b,{children:n(ne,{className:`${l.container}`,heading:"Create Community :",boldHead:!0,icon:"close",onIconClick:e.onCloseClick,children:n("form",{action:"/api/community/create/",method:"post",onSubmit:I,children:[n("div",{className:`mt-10 mb-20 ${l.wrapper}`,children:[n("span",{className:`${l.label}`,children:"Community icon :"}),n(me,{name:"community-icon",id:"communityIconPic",placeholder:a?a.file.name:".png / .jpg / .jpeg",accept:".jpg, .jpeg, .png",text:"Upload your community icon",image:!0,preview:a==null?void 0:a.url,onInput:f,className:l.inp}),n("span",{className:`${l.label}`,children:"Name of your community :"}),n(k,{type:"text",placeholder:"Name",value:t.commName.value,name:t.commName.name,className:`${l.inp}`,onInput:g,required:!0}),n("span",{className:`${l.label}`,children:"Topic of discussion :"}),n(k,{type:"text",placeholder:"Topic",value:t.topic.value,name:t.topic.name,className:`${l.inp}`,maxLength:25,onInput:g,required:!0}),n("span",{className:`${l.label}`,children:"Description :"}),n(k,{type:"textarea",placeholder:"Description",value:t.description.value,name:t.description.name,className:`${l.inp}`,onInput:g,resize:"vertical"})]}),n("span",{className:l.errorMsg,"data-mode":_.mode,children:_.message}),n("div",{className:"mt-20 flx-c",children:n(L,{loading:$,type:"submit",size:"large",children:"Create community"})})]})})})},ve="_container_1rmek_1",we="_listContainer_1rmek_13",y={container:ve,listContainer:we},pe="_container_t3na3_1",Ne="_item_t3na3_11",fe="_link_t3na3_31",ke="_listContainer_t3na3_47",$e="_list_t3na3_47",ye="_lhs_t3na3_133",be="_icon_t3na3_143",Ie="_nameContainer_t3na3_151",xe="_name_t3na3_151",He="_desc_t3na3_173",Le="_rhs_t3na3_183",r={container:pe,item:Ne,link:fe,listContainer:ke,list:$e,lhs:ye,icon:be,nameContainer:Ie,name:xe,desc:He,rhs:Le},H=({items:e,...a})=>n("ul",{className:`${a.className||""} ${r.listContainer}`,children:e==null?void 0:e.map((c,t)=>n("li",{children:[n("a",{href:c.link,className:`mb-10 mt-10 ${r.list}`,children:n("div",{className:r.lhs,children:[c.icon?n("img",{src:c.icon,alt:c.name,width:"40px",height:"40px",className:`mr-10 ${r.icon}`}):null,n("div",{className:r.nameContainer,children:[n("span",{className:r.name,children:c.name}),c.desc?n("span",{className:r.desc,children:c.desc}):null]})]})}),n("span",{className:r.rhs,children:c.rhs})]},t))}),ze=e=>n("div",{className:y.container,children:[n(k,{className:e.className,id:e.id,name:e.name,whiteLbl:e.whiteLbl,onInput:e.onInput,placeholder:e.placeholder,value:e.value,type:"search"}),e.value!==""&&e.suggestions&&e.suggestions.length===0?n(H,{items:[{name:"No results"}],className:`${y.listContainer}`}):null,e.suggestions&&e.suggestions.length>0?n(H,{items:e.suggestions.map(a=>({name:a.name,link:`/x/${a.name}`,rhs:a.participantsCount,icon:a.iconPath,desc:a.topic})),className:`drop-shadow ${y.listContainer}`}):null]}),Ve=e=>{var a;return n("ul",{style:e.style,className:`${e.className||""} ${r.container}`,children:(a=e.items)==null?void 0:a.map((c,t)=>n("li",{className:`${r.item} flx-c`,onClick:c.link?void 0:c.onClick,children:c.link?n("a",{href:c.link,className:`flx-c ${r.link}`,children:c.name}):c.name},t))})},Be=e=>{const[a,c]=u(!1),[t,N]=u(""),[_,m]=u([]),[$,p]=u(!1),f=[{name:"Profile",link:"/profile/"},{name:"Saved Posts",link:"/saved/"},{name:"Create Community",onClick:()=>c(!0)},{name:"Logout",link:"/logout/"}],g=()=>{c(i=>!i)};T(n(Ce,{onCloseClick:g}),{show:a,onBackdropClick:g});const d=B(j(async i=>{if(i===""){m([]);return}try{const C=await(await z(`/api/community/search/${i}`)).json();if(C.ok){m(C.data);return}}catch(s){console.error(s)}},250)),o=()=>{p(i=>!i)};return n("div",{className:`drop-shadow ${v.container}`,children:n("div",{className:`container ${v.wrapper}`,children:[n("a",{href:"/",children:n(D,{width:"120"})}),n("div",{className:v.searchContainer,children:n(ze,{id:"searchInp",name:"search",placeholder:"Search Community, topic",value:t,className:"fw",suggestions:_,onInput:({currentTarget:{value:i}})=>{N(()=>(d.current(i),i))}})}),n("div",{className:v.buttons,children:[n("a",{href:"/post/",className:"mr-20",children:n(L,{children:"Post +"})}),n("div",{className:`${v.iconContainer}`,children:[n("img",{src:__userData.avatar,width:"50px",height:"50px",className:"lite-shadow",alt:__userData.username,onClick:o}),$?n(Ve,{items:f,className:`drop-shadow ${v.iconOptions}`,style:{bottom:`-${f.length*50+15}px`}}):null]})]})]})})};export{ne as C,me as F,Ve as L,Be as N,H as P,T as u};
