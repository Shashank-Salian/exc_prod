import{p as O,B as R,o as n,a as M,h as g,I as V,b as P,f as D,r as S,_ as Z,E as T,d as U}from"./utils-609fe6b6.js";const E="_container_1ggvq_1",F="_wrapper_1ggvq_19",A="_searchContainer_1ggvq_33",W="_buttons_1ggvq_41",G="_iconContainer_1ggvq_51",J="_iconOptions_1ggvq_71",w={container:E,wrapper:F,searchContainer:A,buttons:W,iconContainer:G,iconOptions:J},K=(e,t)=>{O(()=>{if(!t.show)return;const a=document.getElementById("portal");a&&document.body.removeChild(a);const s=document.createElement("div");return s.id="portal",document.body.appendChild(s),R(n(M,{children:n("div",{className:"portal-container",children:[e,n("div",{onClick:N=>{t.onBackdropClick&&t.onBackdropClick(N)},className:t.showBackdrop===void 0||t.showBackdrop?"backdrop":void 0})]})}),s),()=>{document.body.removeChild(s)}},[t])},Q="_container_uzkv2_1",X="_fw_uzkv2_19",Y="_pad_uzkv2_27",ee="_heading_uzkv2_35",ne="_icon_uzkv2_69",ae="_body_uzkv2_81",te="_yellow_uzkv2_113",ce="_orange_uzkv2_121",ie="_blue_uzkv2_129",oe="_red_uzkv2_137",se="_transp_uzkv2_145",f={container:Q,fw:X,pad:Y,heading:ee,icon:ne,body:ae,yellow:te,orange:ce,blue:ie,red:oe,transp:se},le=e=>n("svg",{height:e.width||"32",width:e.width||"32",fill:"none",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",className:e.className,children:[n("path",{d:"M26.7543 1.84812L1.93588 26.739C0.996174 27.6814 1.02471 29.2381 1.99959 30.2158C2.97447 31.1935 4.52655 31.2221 5.46626 30.2797L30.2847 5.3888C31.2244 4.44635 31.1959 2.88974 30.221 1.912C29.2461 0.934275 27.694 0.905672 26.7543 1.84812Z",fill:e.color||"black"}),n("path",{d:"M30.0642 26.739L5.24573 1.8481C4.30602 0.90565 2.75393 0.934265 1.77904 1.91199C0.80416 2.88972 0.775643 4.44633 1.71535 5.38878L26.5338 30.2796C27.4735 31.2221 29.0256 31.1935 30.0005 30.2158C30.9754 29.238 31.0039 27.6814 30.0642 26.739Z",fill:e.color||"black"})]}),re=e=>n("div",{className:`${e.noShadow?"":"drop-shadow"} ${e.noMargin?"":"mt-20 mr-40 mb-20 ml-20"} ${f.container} ${e.className||""} ${e.color?f[e.color]:""} ${e.fw?f.fw:""}`,children:[e.heading?n("div",{className:`${f.heading}`,children:[e.boldHead?n("h2",{children:e.heading}):e.heading,e.icon?n("div",{className:f.icon,onClick:e.onIconClick,children:e.icon==="close"?n(le,{width:"24"}):null}):null]}):null,n("div",{className:f.body,children:e.children})]}),me=e=>n("svg",{height:e.width||"32",width:e.width||"32",fill:"none",viewBox:"0 0 32 32",className:e.className,xmlns:"http://www.w3.org/2000/svg",children:n("path",{d:"M10.6667 14.6666H2.66667V28H29.3333V14.6666H21.3333V12H32V30.6666H0V12H10.6667V14.6666ZM9.33333 9.33331L16 1.33331L22.6667 9.33331H17.3333V24H14.6667V9.33331H9.33333Z",fill:e.color||"black",fillRule:"evenodd"})}),de="_container_c6z1e_1",ue="_fileInpContainer_c6z1e_11",he="_imgInp_c6z1e_27",_e="_imgInpContainer_c6z1e_49",ge="_inpContainer_c6z1e_65",Ce="_inp_c6z1e_65",h={container:de,fileInpContainer:ue,imgInp:he,imgInpContainer:_e,inpContainer:ge,inp:Ce},ve=e=>n("svg",{height:e.width||"32",width:e.width||"32",fill:"none",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:n("path",{d:"M26 16C22.6893 16 20 18.6867 20 22C20 25.3133 22.6893 28 26 28C29.3107 28 32 25.3133 32 22C32 18.6867 29.3107 16 26 16ZM29.3333 22.6667H26.6667V25.3333H25.3333V22.6667H22.6667V21.3333H25.3333V18.6667H26.6667V21.3333H29.3333V22.6667ZM5.33333 22.6667L10.6667 14.72L13.9733 17.3333L17.3333 12L19.804 15.952C18.1093 17.6893 17.168 20.0707 17.368 22.6667H5.33333ZM19.76 28H0V4H29.3333V14.0013C28.5027 13.6533 27.604 13.4387 26.6667 13.3667V6.66667H2.66667V25.3333H18.0027C18.4187 26.332 19.0227 27.232 19.76 28ZM7.33333 13.3333C6.22933 13.3333 5.33333 12.4387 5.33333 11.3333C5.33333 10.2293 6.22933 9.33333 7.33333 9.33333C8.43733 9.33333 9.33333 10.2293 9.33333 11.3333C9.33333 12.4387 8.43733 13.3333 7.33333 13.3333Z",fill:e.color||"black"})}),we=e=>n("div",{className:`${h.container} ${e.className||""}`,children:[e.image?n(M,{children:[n("div",{className:`${h.inpContainer} ${h.imgInpContainer} lite-shadow`,children:n(ve,{width:"58",color:"var(--black)"})}),e.preview?n("img",{src:e.preview,className:`${h.inpContainer} ${h.imgInpContainer}`}):null]}):n("div",{className:`${h.inpContainer} ${h.fileInpContainer} lite-shadow`,children:[e.text,n(me,{color:"#fff",className:"ml-10",width:"22"})]}),n("input",{type:"file",id:e.id,name:e.name,required:e.required,multiple:e.multiple,accept:e.accept,onInput:e.onInput,style:e.width?{width:e.width}:void 0,className:`${e.image?`mb-10 ${h.imgInp}`:h.inp}`}),n("br",{}),n("label",{htmlFor:e.id,children:e.placeholder})]}),fe="_container_92dj4_1",Ne="_wrapper_92dj4_13",pe="_label_92dj4_29",$e="_inp_92dj4_37",ke="_errorMsg_92dj4_45",m={container:fe,wrapper:Ne,label:pe,inp:$e,errorMsg:ke},ye=e=>{var l,$,k,B,j;const t=(l=e.defaultVal)!=null&&l.icon?{file:e.defaultVal.icon,url:URL.createObjectURL(e.defaultVal.icon)}:void 0,[a,s]=g(t),[c,N]=g({commName:{name:"community-name",value:(($=e.defaultVal)==null?void 0:$.commName)||""},topic:{name:"community-topic",value:((k=e.defaultVal)==null?void 0:k.topic)||""},description:{name:"community-description",value:((B=e.defaultVal)==null?void 0:B.description)||""}}),[p,u]=g({message:"",mode:"warn"}),[x,C]=g(!1),b=r=>{const{files:o}=r.currentTarget;if(o&&o.length!==0){const[_]=o;if(_.size>1024*1024){u({message:"Image size should be less than 1MB",mode:"error"});return}u({message:"",mode:"warn"}),s({file:_,url:URL.createObjectURL(_)})}},I=r=>{const o=r.currentTarget.value;N(_=>{const i={..._};switch(r.currentTarget.name){case i.commName.name:const v=o.toLowerCase();if(v===""||D(v,1)){u({message:"",mode:"warn"}),i.commName.value=v;break}u({message:"Invalid community name",mode:"error"});break;case i.topic.name:i.topic.value=o;break;case i.description.name:i.description.value=o;break}return i})},L=(r,o)=>!(r.name!==o.name||r.size!==o.size||r.type!==o.type),z=async r=>{var o,_;if(r.preventDefault(),r.stopImmediatePropagation(),D(c.commName.value)&&c.topic.value.length>2&&c.topic.value.length<=25&&c.description.value.length<=500){const i=new FormData;i.append("communityName",c.commName.value),i.append("topic",c.topic.value),i.append("description",c.description.value),a&&(console.log("Adding icon file"),e.update&&(o=e.defaultVal)!=null&&o.icon?L(a.file,e.defaultVal.icon)||(console.log("Adding icon file"),i.append("communityIcon",a.file)):i.append("communityIcon",a.file));try{C(!0);const y=await(await S(`/api/community/${e.update?`update/${(_=e.defaultVal)==null?void 0:_.commName}/`:"create/"}`,i,"POST")).json();console.log(y),C(!1),y.error?u({message:y.message,mode:"error"}):(u({message:y.message,mode:"success"}),location.pathname=`/x/${y.data.name}`)}catch(v){C(!1),console.error(v)}}else u({message:"Invalid input",mode:"error"})};return n(M,{children:n(re,{className:`${m.container}`,heading:`${e.update?"Update":"Create"} Community :`,boldHead:!0,icon:"close",onIconClick:e.onCloseClick,children:n("form",{action:`/api/community/${e.update?`update/${(j=e.defaultVal)==null?void 0:j.commName}/`:"create/"}`,method:"post",onSubmit:z,children:[n("div",{className:`mt-10 mb-20 ${m.wrapper}`,children:[n("span",{className:`${m.label}`,children:"Community icon :"}),n(we,{name:"community-icon",id:"communityIconPic",placeholder:a?a.file.name:".png / .jpg / .jpeg",accept:".jpg, .jpeg, .png",text:"Upload your community icon",image:!0,preview:a==null?void 0:a.url,onInput:b,className:m.inp}),n("span",{className:`${m.label}`,children:"Name of your community :"}),n(V,{type:"text",placeholder:"Name",value:c.commName.value,name:c.commName.name,className:`${m.inp}`,onInput:I,required:!0}),n("span",{className:`${m.label}`,children:"Topic of discussion :"}),n(V,{type:"text",placeholder:"Topic",value:c.topic.value,name:c.topic.name,className:`${m.inp}`,maxLength:25,onInput:I,required:!0}),n("span",{className:`${m.label}`,children:"Description :"}),n(V,{type:"textarea",placeholder:"Description",value:c.description.value,name:c.description.name,className:`${m.inp}`,onInput:I,resize:"vertical"})]}),n("span",{className:m.errorMsg,"data-mode":p.mode,children:p.message}),n("div",{className:"mt-20 flx-c",children:n(P,{loading:x,type:"submit",size:"large",children:[e.update?"Update":"Create"," community"]})})]})})})},be="_container_1rmek_1",Ie="_listContainer_1rmek_13",H={container:be,listContainer:Ie},Ve="_container_t3na3_1",xe="_item_t3na3_11",Le="_link_t3na3_31",ze="_listContainer_t3na3_47",He="_list_t3na3_47",Me="_lhs_t3na3_133",Be="_icon_t3na3_143",je="_nameContainer_t3na3_151",De="_name_t3na3_151",qe="_desc_t3na3_173",Pe="_rhs_t3na3_183",d={container:Ve,item:xe,link:Le,listContainer:ze,list:He,lhs:Me,icon:Be,nameContainer:je,name:De,desc:qe,rhs:Pe},q=({items:e,...t})=>n("ul",{className:`${t.className||""} ${d.listContainer}`,children:e==null?void 0:e.map((a,s)=>n("li",{children:[n("a",{href:a.link,className:`mb-10 mt-10 ${d.list}`,children:n("div",{className:d.lhs,children:[a.icon?n("img",{src:a.icon,alt:a.name,width:"40px",height:"40px",className:`mr-10 ${d.icon}`}):null,n("div",{className:d.nameContainer,children:[n("span",{className:d.name,children:a.name}),a.desc?n("span",{className:d.desc,children:a.desc}):null]})]})}),n("span",{className:d.rhs,children:a.rhs})]},s))}),Se=e=>n("div",{className:H.container,children:[n(V,{className:e.className,id:e.id,name:e.name,whiteLbl:e.whiteLbl,onInput:e.onInput,placeholder:e.placeholder,value:e.value,type:"search"}),e.value!==""&&e.suggestions&&e.suggestions.length===0?n(q,{items:[{name:"No results"}],className:`${H.listContainer}`}):null,e.suggestions&&e.suggestions.length>0?n(q,{items:e.suggestions.map(t=>({name:t.name,link:`/x/${t.name}`,rhs:t.participantsCount,icon:t.iconPath,desc:t.topic})),className:`drop-shadow ${H.listContainer}`}):null]}),Oe=e=>{var t;return n("ul",{style:e.style,className:`${e.className||""} ${d.container}`,children:(t=e.items)==null?void 0:t.map((a,s)=>n("li",{className:`${d.item} flx-c`,onClick:a.link?void 0:a.onClick,children:a.link?n("a",{href:a.link,className:`flx-c ${d.link}`,children:a.name}):a.name},s))})},Ze=e=>{const[t,a]=g(!1),[s,c]=g(""),[N,p]=g([]),[u,x]=g(!1),C=[{name:"Profile",link:"/profile/"},{name:"Saved Posts",link:"/saved/"},{name:"Create Community",onClick:()=>a(!0)},{name:"Logout",link:"/logout/"}],b=()=>{a(l=>!l)};K(n(ye,{onCloseClick:b}),{show:t,onBackdropClick:b});const L=Z(U(async l=>{if(l===""){p([]);return}try{const k=await(await S(`/api/community/search/${l}`)).json();if(k.ok){p(k.data);return}}catch($){console.error($)}},250)),z=()=>{x(l=>!l)};return n("div",{className:`drop-shadow ${w.container}`,children:n("div",{className:`container ${w.wrapper}`,children:[n("a",{href:"/",children:n(T,{width:"120"})}),n("div",{className:w.searchContainer,children:n(Se,{id:"searchInp",name:"search",placeholder:"Search Community, topic",value:s,className:"fw",suggestions:N,onInput:({currentTarget:{value:l}})=>{c(()=>(L.current(l),l))}})}),n("div",{className:w.buttons,children:[n("a",{href:"/post/",className:"mr-20",children:n(P,{children:"Post +"})}),n("div",{className:`${w.iconContainer}`,children:[n("img",{src:__userData.avatar,width:"50px",height:"50px",className:"lite-shadow",alt:__userData.username,onClick:z}),u?n(Oe,{items:C,className:`drop-shadow ${w.iconOptions}`,style:{bottom:`-${C.length*50+15}px`}}):null]})]})]})})};export{re as C,we as F,Oe as L,Ze as N,q as P,ye as a,K as u};
